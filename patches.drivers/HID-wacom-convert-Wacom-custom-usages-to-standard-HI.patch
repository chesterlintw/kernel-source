From 418b573b431310306db31e445594317ba62f5508 Mon Sep 17 00:00:00 2001
From: Ping Cheng <pingc@wacom.com>
Date: Mon, 25 Jun 2018 13:24:36 -0700
Subject: [PATCH] HID: wacom: convert Wacom custom usages to standard HID usages
Git-commit: 418b573b431310306db31e445594317ba62f5508
Patch-mainline: v4.19-rc1
References: bsc#1051510

Otherwise the switch would not catch the proper usages.

Signed-off-by: Ping Cheng <ping.cheng@wacom.com>
Reviewed-by: Ping Cheng <ping.cheng@wacom.com>
Signed-off-by: Jiri Kosina <jkosina@suse.cz>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/hid/wacom_sys.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/drivers/hid/wacom_sys.c b/drivers/hid/wacom_sys.c
index 3a4cf2666a7c..52e85d21e40f 100644
--- a/drivers/hid/wacom_sys.c
+++ b/drivers/hid/wacom_sys.c
@@ -394,6 +394,7 @@ static void wacom_usage_mapping(struct hid_device *hdev,
 	struct wacom_features *features = &wacom->wacom_wac.features;
 	bool finger = WACOM_FINGER_FIELD(field);
 	bool pen = WACOM_PEN_FIELD(field);
+	unsigned equivalent_usage = wacom_equivalent_usage(usage->hid);
 
 	/*
 	* Requiring Stylus Usage will ignore boot mouse
@@ -409,7 +410,7 @@ static void wacom_usage_mapping(struct hid_device *hdev,
 
 	wacom_hid_usage_quirk(hdev, field, usage);
 
-	switch (usage->hid) {
+	switch (equivalent_usage) {
 	case HID_GD_X:
 		features->x_max = field->logical_maximum;
 		if (finger) {
-- 
2.16.4

